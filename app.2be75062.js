(function(){"use strict";var t={4103:function(t,e,a){var i=a(6369),r=a(3822),n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("weather-widget")],1)},o=[],s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"weather-widjet"},[e("h1",[t._v("Current weather and air quality")]),e("location-weather",{attrs:{incorrectCity:t.incorrectCity},on:{"get-weather-city":t.getWeatherCity,"check-reload":t.checkReload}}),e("h2",[t._v("Cities")]),e("transition",{attrs:{name:"fade",mode:"out-in"}},[t.loaded?e("div",{key:"content"},[t._l(t.getItems,(function(a,i){return e("card-weather",{key:a.id,attrs:{data:a},on:{"delete-card":function(e){return t.deleteCard(i)}}})})),e("vuejs-paginate",{attrs:{"page-count":t.getPaginateCount,"prev-text":"<","next-text":">","click-handler":t.paginateClickCallback,"container-class":"pagination justify-content-center","page-class":"page-item","page-link-class":"page-link","prev-class":"page-item","prev-link-class":"page-link","next-class":"page-item","next-link-class":"page-link","first-last-button":!0,"first-button-text":"<<","last-button-text":">>"}})],2):e("div",{key:"loading"},[e("img",{attrs:{src:a(708),alt:"loading"}})])])],1)},c=[],l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"location"},[e("p",{staticClass:"location__text"},[t._v("Location:")]),e("div",{staticClass:"location__input",class:t.$v.city.$error?"error":""},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"}],attrs:{type:"text",placeholder:"Enter city"},domProps:{value:t.city},on:{input:function(e){e.target.composing||(t.city=e.target.value)}}}),t.$v.city.required&&t.$v.city.minLength||!t.$v.city.$dirty?t._e():e("div",{staticClass:"location__input-error"},[t._v("Field must be filled")]),t.incorrectCity?e("div",{staticClass:"location__input-error location__input-error-name"},[t._v("Incorrect name")]):t._e()]),e("div",{staticClass:"location__btn"},[e("button",{on:{click:t.applyLocation}},[t._v("Search")])])])},d=[],u=a(4951),h=a(5795),p={mixins:[u.oE],data(){return{city:null}},props:{incorrectCity:{type:Boolean,default:!1}},validations:{city:{required:h.C1,minLength:(0,h.Ei)(1)}},methods:{applyLocation(){this.$v.city.$touch(),this.$v.city.$error||(this.$emit("get-weather-city",this.city),this.$emit("check-reload",!1))}}},f=p,_=a(1001),v=(0,_.Z)(f,l,d,!1,null,"7c997978",null),y=v.exports,g=function(){var t=this,e=t._self._c;return e("div",{class:["card",{card__default:t.data.isDefault}]},[e("card-city",{attrs:{dataCity:t.filterDataCity}}),e("card-info",{attrs:{dataInfo:t.filterDataInfo}}),t.data.isDefault?t._e():e("span",{staticClass:"card__close",on:{click:t.closeCard}},[t._v("X")])],1)},m=[],C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-city"},[e("p",{staticClass:"card-city__name"},[t._v(t._s(t.dataCity.city))]),e("div",{staticClass:"card-city__info"},[e("p",{staticClass:"card-city__info-temp"},[t._v(" "+t._s(Math.round(t.dataCity.temp))+"°")]),e("div",{staticClass:"card-city__info__weather"},[e("p",{staticClass:"card-city__info__weather-text"},[e("strong",[t._v(" "+t._s(t.dataCity.weather)+" ")])]),t.dataCity.feels_like?e("p",{staticClass:"card-city__info__weather-feel"},[t._v("Feels like "+t._s(Math.round(t.dataCity.feels_like))+"°")]):t._e()])])])},w=[],b={props:{dataCity:{type:Object,default(){return{city:"New York",temp:26,weather:"Clear",feels_like:23}}}}},k=b,E=(0,_.Z)(k,C,w,!1,null,"f3079aa0",null),A=E.exports,D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-info"},t._l(t.dataInfo,(function({id:t,indicator:a,value:i}){return e("card-indicator",{key:t,attrs:{indicator:a,value:i}})})),1)},P=[],x=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-indicator"},[e("p",{staticClass:"card-indicator__name"},[t._v(t._s(t.indicator))]),e("p",{staticClass:"card-indicator__val"},[e("strong",[t._v(t._s(t.value))])])])},O=[],W={props:{indicator:{type:String,default:"Wind"},value:{type:Number,default:0}}},$=W,I=(0,_.Z)($,x,O,!1,null,"b5756b9e",null),L=I.exports,T={components:{CardIndicator:L},props:{dataInfo:{type:Array,default(){return[{indicator:"Wind, km/h",value:12.4},{indicator:"Visibility",value:0},{indicator:"Pressure",value:0},{indicator:"Humidity",value:0}]}}}},N=T,Z=(0,_.Z)(N,D,P,!1,null,"6963b272",null),R=Z.exports,j={components:{CardInfo:R,CardCity:A},props:{data:{type:Object}},methods:{closeCard(){this.$emit("delete-card")}},computed:{filterDataCity(){const{name:t,weather:e,main:{temp:a,feels_like:i}}=this.data;return{city:t,temp:a-273,weather:e[0].main,feels_like:i-273}},filterDataInfo(){const{wind:t,visibility:e,main:{pressure:a,humidity:i}}=this.data;return[{indicator:"Wind, km/h",value:t.speed},{indicator:"Visibility",value:e},{indicator:"Pressure",value:a},{indicator:"Humidity",value:i}]}}},H=j,S=(0,_.Z)(H,g,m,!1,null,"2bf4f411",null),G=S.exports,M=a(2806),V=a.n(M),Y={components:{LocationWeather:y,CardWeather:G,VuejsPaginate:V()},data(){return{loaded:!1,incorrectCity:!1,noreload:!0,currentPage:1,perPage:5}},mounted(){this.weatherCities?this.weatherCities.forEach((t=>{this.getWeatherCity(t.city,t.isDefault)})):this.getGeolocation()},methods:{...(0,r.nv)(["addWeatherData","addWeatherCity"]),getWeatherInfo(t,e){this.addWeatherData({lat:t,lon:e}).then((t=>(this.$store.commit("CHANGE_LOCALSTORAGE",[{city:t.name,isDefault:!0}]),this.loaded=!0,t))).catch((t=>{console.error(t.message),alert("Your browser does not support Navigator API")}))},getGeolocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{this.getWeatherInfo(t.coords.latitude,t.coords.longitude)})):alert("Your browser does not support Navigator API")},getWeatherCity(t,e=null){this.loaded=!1,this.addWeatherCity({city:t,isDefault:e}).then((t=>{if(this.incorrectCity=!1,!this.noreload){let e=this.weatherCities;e.push({city:t.name}),this.$store.commit("CHANGE_LOCALSTORAGE",e)}this.loaded=!0})).catch((()=>{this.incorrectCity=!0,this.loaded=!0}))},checkReload(t){this.noreload=t},deleteCard(t){this.$store.commit("REMOVE_WEATHER_BY_INDEX",t);let e=this.weatherCities;e.splice(t,1),this.$store.commit("CHANGE_LOCALSTORAGE",e)},paginateClickCallback(t){this.currentPage=Number(t)}},computed:{...(0,r.rn)(["weatherData","weatherCities"]),getItems(){let t=(this.currentPage-1)*this.perPage,e=this.currentPage*this.perPage;return this.weatherData.slice(t,e)},getPaginateCount(){return Math.ceil(this.weatherData.length/this.perPage)}}},q=Y,B=(0,_.Z)(q,s,c,!1,null,null,null),F=B.exports,X={name:"App",components:{WeatherWidget:F}},J=X,z=(0,_.Z)(J,n,o,!1,null,null,null),K=z.exports,Q=a(6265),U=a.n(Q);i.ZP.use(r.ZP);var tt=new r.ZP.Store({state:{weatherData:[],weatherCities:JSON.parse(localStorage.getItem("data-weather"))},mutations:{WEATHER_DATA(t,e){t.weatherData.push(e)},REMOVE_WEATHER_BY_INDEX(t,e){t.weatherData.splice(e,1)},CHANGE_LOCALSTORAGE(t,e){localStorage.setItem("data-weather",JSON.stringify(e)),t.weatherCities=e}},actions:{addWeatherData(t,{lat:e,lon:a}){try{return U().get(`http://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${a}&appid=b4f2447b3b05c86e015a35a9e833b87a`).then((e=>{let a=e.data;return a.isDefault=!0,t.commit("WEATHER_DATA",a),a}))}catch(i){console.error(i)}},addWeatherCity(t,{city:e,isDefault:a}){try{return U().get(`http://api.openweathermap.org/data/2.5/weather?q=${e}&appid=b4f2447b3b05c86e015a35a9e833b87a`).then((e=>{let i=e.data;return i.isDefault=a,t.commit("WEATHER_DATA",i),i}))}catch(i){console.error(i)}}}});i.ZP.config.productionTip=!1,i.ZP.use(r.ZP),new i.ZP({store:tt,render:t=>t(K)}).$mount("#app")},708:function(t,e,a){t.exports=a.p+"img/Loading.2e182055.gif"}},e={};function a(i){var r=e[i];if(void 0!==r)return r.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,i,r,n){if(!i){var o=1/0;for(d=0;d<t.length;d++){i=t[d][0],r=t[d][1],n=t[d][2];for(var s=!0,c=0;c<i.length;c++)(!1&n||o>=n)&&Object.keys(a.O).every((function(t){return a.O[t](i[c])}))?i.splice(c--,1):(s=!1,n<o&&(o=n));if(s){t.splice(d--,1);var l=r();void 0!==l&&(e=l)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[i,r,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p="/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var r,n,o=i[0],s=i[1],c=i[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)var d=c(a)}for(e&&e(i);l<o.length;l++)n=o[l],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(d)},i=self["webpackChunktest_devit"]=self["webpackChunktest_devit"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(4103)}));i=a.O(i)})();
//# sourceMappingURL=app.2be75062.js.map